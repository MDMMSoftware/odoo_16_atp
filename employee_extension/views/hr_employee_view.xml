<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Top Menu Employee to override icon -->
    <menuitem
            id="hr.menu_hr_root"
            name="Employees"
            groups="hr.group_hr_manager,hr.group_hr_user"
            web_icon="employee_extension,static/description/employee.png"
        sequence="185"/>


  	<record id="view_employee_filter_inh" model="ir.ui.view">
        <field name="name">hr.employee.search</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_filter"/>
        <field name="arch" type="xml">   
        	<xpath expr="//filter[@name='inactive']" position="after">
        		<filter string="Semi Inactive" name="semi_active" domain="[('semi_active', '=', True)]"/>
        	</xpath>
            <xpath expr="//field[@name='job_id']" position="after">
                <field name="employee_id" string="Staff ID No."/>
                <field name="fingerprint_id" string="Fingerprint ID"/>
                <field name="department_id" string="Department"/>
                <field name="unit_id" string="Business Unit"/>
            </xpath>
            <group expand="0" string="Group By">
                <filter name="unit_id" string="Business Unit" domain="[]" context="{'group_by': 'unit_id'}"/>
                <filter name="sequence" string="Rank" domain="[]" context="{'group_by': 'sequence'}"/>
            </group>
        </field>
    </record>

	<record id="view_employee_view_form" model="ir.ui.view">
		<field name="name">hr.employee.form</field>
		<field name="model">hr.employee</field>
		<field name="inherit_id" ref="hr.view_employee_form"/>
		<field name="arch" type="xml">
			<header>
				<button name="print_btn" string="Employee CV Form" type="object" class="oe_highlight"/>
				<button name="update_image_binary" string="Image" type="object" class="oe_highlight" invisible='1'/>
			</header>  
			<xpath expr="//form/sheet/div[@class='oe_title']/h2/field[@name='job_title']" position="before" >
				<div class="oe_title">
					<label for="burmese_name" string="Burmese Name" class="oe_read_only"/><br/>
						<field name="burmese_name" placeholder="Burmese Name"/><br/>
					<label for="employee_id" string="Staff ID No." class="oe_read_only"/><br/>
						<field name="employee_id" placeholder="Staff ID No." /><br/>
					<label for="fingerprint_id" string="Fingerprint ID" class="oe_read_only"/><br/>
						<field name="fingerprint_id" placeholder="Fingerprint ID"/>
				</div>
			</xpath>
			<xpath expr="//field[@name='identification_id']" position="after">
				<label for="nrc_no" string="NRC" class="oe_inline"/>
               	<div>
                   <field name="nrc_number" placeholder="1" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}" class="oe_inline" />/
                   <field name="nrc_code" placeholder="KaKaNa" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}" class="oe_inline" />
                   <field name="nrc_desc" placeholder="(N)" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}" class="oe_inline" />
                   <field name="nrc_no" placeholder="111111" class="oe_inline"/>
               </div>
               <field name="nrc_full" invisible="1" />
			</xpath>
			<!-- by yma -->		
			<xpath expr="//field[@name='job_title']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

			<!-- <xpath expr="//field[@name='company_id']" position="after">
           		<field name="company" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}" />
          	</xpath>
          	<xpath expr="//field[@name='company_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->


			<xpath expr="//page[@name='personal_information']/group/group/field[@name='bank_account_id']" position="before">
				<field name="viber_no" string="Viber Number"/>
			</xpath>

            <xpath expr="//page[@name='hr_settings']//group[@name='payroll_group']" position="replace">
                <group string='Payroll' name="payroll_group" attrs="{'invisible': [('is_hr_manager','=', True)]}">
                    <field name="is_hr_manager" invisible="1"/>
                </group>
			</xpath>
			<xpath expr="//field[@name='category_ids']" position="replace">
				<field name="category_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}" placeholder="Employee Type"  groups="hr.group_hr_manager"/>
			</xpath>
			<xpath expr="//field[@name='job_id']" position="replace">
			</xpath>
			<!-- by yma -->		
			<xpath expr="//field[@name='mobile_phone']" position="attributes">
           		<attribute name="required">True</attribute>
          	</xpath> 
            <xpath expr="//field[@name='department_id']" position="replace">
            	<field name="semi_active" invisible="1"/>
                <field name="department_id" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}" />
            </xpath>         
			<xpath expr="//field[@name='country_id']" position='after'>
				<field name="city_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="religion" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="race" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="blood_group" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
			</xpath>
			<xpath expr="//field[@name='children']" position="replace">
				<field name="total_child" />
			</xpath>
			<xpath expr="//field[@name='passport_id']" position='before'>
				<field name="ssb_id" />
			</xpath>
			<xpath expr="//field[@name='birthday']" position='after'>
				<field name="age" />
			</xpath>
			<xpath expr="//field[@name='birthday']" position="attributes">
           		<attribute name="required">True</attribute>
          	</xpath> 
			<xpath expr="//field[@name='bank_account_id']" position='after'>
				<field name="bank_name" force_save="1"/>
			</xpath>
			<xpath expr="//field[@name='emergency_phone']" position='after'>
				<field name="relationship" />
			</xpath>
			<xpath expr="//field[@name='address_id']" position='attributes'>
				<attribute name="invisible">1</attribute>
			</xpath>
			<xpath expr="//field[@name='address_home_id']" position='replace'>
				<field name="address_home_id" invisible="1" />
				<field name="home_address"/>
				<field name="current_address"/>
				
			</xpath>
			<xpath expr="//field[@name='work_location_id']" position='replace'>
				<field name="job_location" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="branch_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="hostel_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
			</xpath>
			<xpath expr="//field[@name='department_id']" position='before'>
				<field name="unit_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
                <field name="division_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
			</xpath>
			<xpath expr="//field[@name='department_id']" position='after'>
				<field name="job_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="designation_type" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="grade_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="rank" required="1" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}"/>
                
				<field name="sequence_copy" invisible="1"/>
				<field name="sequence" invisible="1"/>
				<button name="temp_action_t" type="object" string="test" invisible="1"/>
			</xpath>
			<xpath expr="//field[@name='parent_id']" position='replace'>
			</xpath>
			<xpath expr="//field[@name='coach_id']" position='replace'>
			</xpath>
			<xpath expr="//group[@name='managers']" position='inside'>
				<field name="parent_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="coach_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
				<field name="leader_id" options="{'no_create':True,'no_create_edit': True,'no_open': True}"/>
			</xpath>
			<xpath expr="//field[@name='work_email']" position='after'>
				<field name="trial_date_start"/>
				<label for="service_year_2" string="Service Year" class="oe_inline"/>
                   <div class="application_form">
                       <div>
                       		<field name="service_year" class="oe_inline service_year" /> years
                       		<field name="service_month" class="oe_inline service_month" /> months
                       		<field name="service_day" class="oe_inline service_day" /> days
	                       <field name="service_year_2" class="oe_inline" invisible="1"/>
	                   </div>
                   </div>
			</xpath>
			<xpath expr="//form/sheet/notebook/page[@name='personal_information']/group" position="inside">
				<group string="Vehicle">
					<field name="driving_license_no"/>
					<field name="driving_license_type"/>
					<field name="driving_license_expired_date"/>
					<field name="car_machine_name"/>
					<field name="machine_model"/>
					<field name="grading"/>
					<field name="grading2"/>
				</group>
			</xpath>
			<!-- by yma -->
			<xpath expr="//field[@name='private_email']" position="attributes">
				<attribute name="readonly">0</attribute>
			</xpath>
			<xpath expr="//field[@name='phone']" position="attributes">
				<attribute name="readonly">0</attribute>
			</xpath>

			<xpath expr="//field[@name='spouse_complete_name']" position='after'>
					<field name="spouse_occupaction" attrs="{'invisible': [('marital', 'not in', ['married', 'cohabitant'])]}" groups="hr.group_hr_user"/>
					<field name="relation_in" attrs="{'invisible': [('marital', 'not in', ['married', 'cohabitant'])]}" groups="hr.group_hr_user"/>
			</xpath>
			<xpath expr="//form/sheet/notebook/page[@name='personal_information']" position="after">
                <page  string="Family Information" groups="hr.group_hr_user">
                    <group string="Parents">
                        <group>
                            <field name="father_name" class="oe_inline"/>
                            <field name="father_dop" class="oe_inline"/>
                            <field name="mother_name" class="oe_inline"/>
                            <field name="mother_dop" class="oe_inline"/>
                        </group>
                        <group>
                            <field name="father_name_myanmar" class="oe_inline"/>
                            <field name="mother_name_myanmar" class="oe_inline"/>
                            <field name="live_with_father" class="oe_inline" widget="radio"/>
                            <field name="live_with_mother" class="oe_inline" widget="radio"/>
                        </group>
                    </group>
                    <group string="Other Family Members">
                        <field name="brother_ids" nolabel="1">
                            <tree editable="buttom">
                                <field name="name"/>
                                <field name="bother_age"/>
                                <field name="relation"/>
                            </tree>
                        </field>
                    </group>
                    <group string="About Children" attrs="{'invisible': [('marital', '=', 'single')]}" groups="hr.group_hr_user">
                        <field name="child_id" nolabel="1">
                            <tree editable="buttom">
                                <field name="name"/>
                                <field name="child_age"/>
                                <field name="education"/>
                            </tree>
                        </field>
                    </group>
                </page>
			</xpath>
			<xpath expr="//form/sheet/notebook/page[@name='personal_information']/group/group[4]" position="after">
				<group string="OT/Attendance">
					<field name="has_ot"/>
					<field name="has_attendance"/>
				</group>
			</xpath>
			
			<xpath expr="//field[@name='study_school']" position="after">
				<field name="remark" placeholder="Remark" />
			</xpath>
			<field name="user_id" position="after">
                <field name="user_check_tick" invisible="1"/>
                 <!--  KKW -->
                <!-- <field name="payroll_calculator_id"/>
                <field name="no_attendance"/>
                <field name="no_ot"/> -->
                <!--  KKW -->
            </field>
            <xpath expr="//header[1]" position="inside">
                <button name="create_user" string="Create User Account" type="object" class="oe_highlight" attrs="{'invisible':[('user_check_tick','=',True)]}"/>
                <button name="change_md_code_password" type="object" class="oe_highlight btn-warning" string="Change Password" attrs="{'invisible':[('user_id','=',False)]}" groups="hr.group_hr_manager" confirm="Are you sure to change this password ? This action will be logged.."/>
            </xpath>
            <!-- start 27-06-2022 -->
            <xpath expr="//label[@for='km_home_work']" position="attributes">  
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//div[@name='div_km_home_work']" position="attributes">  
                <attribute name="invisible">1</attribute>
            </xpath>
            <!-- end 27-06-2022 -->
            <!--start 17-06-2022 -->
            <xpath expr="//page[@name='hr_settings']" position="before">     
                <page name='hr_bank_info' string="Bank" groups="hr.group_hr_manager">
                    <field name="bank_id">
                        <tree string="Bank for Employee"  editable="buttom" class='bank'>
                            <field name="bank_name"/>
                            <field name="short_code"/>
                            <field name="bank_acc_no"/> 
                            <field name="nrc_no"/> 
                            <field name="card_holder_name"/> 
                            <field name="type"/> 
                            <field name="bank_active"/>
                        </tree>
                    </field>
                </page>
            </xpath>
            <!--end 17-06-2022 -->
		</field>
	</record>

	<record id="view_employee_tree_inherit_ext" model="ir.ui.view">
		<field name="name">hr.employee.form.inherit</field>
		<field name="model">hr.employee</field>
		<field name="inherit_id" ref="hr.view_employee_tree"/>
		<field name="arch" type="xml">
			<xpath expr="//tree[1]" position="inside">
                <header>
	                <button name="multi_create_user" type="object" string="Create User Account"/>
	            </header>
            </xpath>
            <xpath expr="//field[@name='department_id']" position='replace'>
            </xpath>
            <xpath expr="//field[@name='work_email']" position='replace'>
            </xpath>
            <!-- <xpath expr="//field[@name='company_id']" position='replace'>
            </xpath> -->
            <xpath expr="//field[@name='job_id']" position='replace'>
            </xpath>
            <xpath expr="//field[@name='parent_id']" position='replace'>
            </xpath>
            <xpath expr="//field[@name='work_phone']" position='before'>
                <field name="job_id"/>
            	<field name="department_id"/>
                <field name="division_id"/>
                <field name="unit_id"/>
                <field name="job_location"/>
            </xpath>
		
		<!-- <xpath expr="//field[@name='parent_id']" position='after'>
            	<field name="sequence" string="Rank"/>
            </xpath> -->
		</field>
	</record>

	<!--start  Bank id -->
         <record id="view_bank_info_form" model="ir.ui.view">
            <field name="name">Employee Bank</field>
            <field name="model">employee.bank</field>
            <field name="arch" type="xml">
                <form string="Bank">
                    <sheet>
                       <group>
                            <group>
                                <field name="employee_id" style="width:50%%" />
                                <field name="short_code" style="width:50%%" />
                                <field name="card_holder_name"/> 
                            	<field name="type"/>
                                <field name="bank_active" style="width:50%%" />
                            </group>
                            <group>
                                <field name="acc_name" style="width:50%%" />
                                <field name="bank_acc_no" style="width:50%%" />
                                <field name="bank_name" style="width:50%%" />
                                <field name="nrc_no"/> 
                            	
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>  
        <record id="view_bank_info_tree" model="ir.ui.view">
            <field name="name">Bank Tree</field>
            <field name="model">employee.bank</field>
            <field name="arch" type="xml">
                <tree string="Bank">
                    <field name="employee_id"/>
                    <field name="acc_name"/>
                    <field name="bank_name" />
                    <field name="short_code"/>
                    <field name="bank_acc_no" />
                    <field name="nrc_no"/> 
                    <field name="card_holder_name"/> 
                    <field name="type"/>
                    <field name="bank_active"/>
                </tree>
            </field>
        </record>
        <record id="action_bank_info_view" model="ir.actions.act_window">
            <field name="name">Employee Bank</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">employee.bank</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_bank_info_tree" />
        </record>    
         <menuitem
                id="employee_bank_menu"
                name="Employee Bank"
                action="action_bank_info_view"
                parent="hr.menu_human_resources_configuration"
                groups="hr.group_hr_manager"
                sequence="6"/>
        <!-- end cost employee.bank -->

        <!--start  Bank name -->
         <record id="view_bank_name_form" model="ir.ui.view">
            <field name="name">Bank</field>
            <field name="model">bank.name</field>
            <field name="arch" type="xml">
                <form string="Bank">
                    <sheet>
                       <group>
                            <field name="name" style="width:50%%"/>
                            <field name="code" style="width:50%%"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>  
        <record id="view_bank_name_tree" model="ir.ui.view">
            <field name="name">Bank Tree</field>
            <field name="model">bank.name</field>
            <field name="arch" type="xml">
                <tree string="Bank">
                    <field name="name"/>
                    <field name="code"/>
                </tree>
            </field>
        </record>
        <record id="action_bank_name_view" model="ir.actions.act_window">
            <field name="name">Bank</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">bank.name</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_bank_name_tree" />
        </record>    
         <menuitem
                id="bank_name_menu"
                name="Bank"
                action="action_bank_name_view"
                parent="hr.menu_human_resources_configuration"
                groups="hr.group_hr_manager"
                sequence="7"/>
        <!-- end bank name -->
        <!-- start 29-06-2022 -->
        <record id="hr.open_view_employee_list_my" model="ir.actions.act_window">
            <field name="name">Employees</field>
            <field name="res_model">hr.employee</field>
            <field name="view_mode">kanban,tree,form,activity</field>
            <field name="domain">[]</field>
            <field name="context">{'chat_icon': True}</field>
            <field name="view_id" ref="hr.view_employee_tree"/>
            <field name="search_view_id" ref="hr.view_employee_filter"/>
            <field name="help" type="html">
             <p class="o_view_nocontent_smiling_face">
               Add a new employee
             </p><p>
               With just a quick glance on the Odoo employee screen, you
               can easily find all the information you need for each person;
               contact data, job position, availability, etc.
             </p>
            </field>
        </record>

        
        <!-- end 29-06-2022 -->

        <!-- start 30-06-2022 -->
        <record id="view_hr_job_form_inh" model="ir.ui.view">
            <field name="name">hr.job.form</field>
            <field name="model">hr.job</field>
            <field name="inherit_id" ref="hr.view_hr_job_form"/>
            <field name="arch" type="xml">  
                <xpath expr="//div[2]" position="after">
                    <group>
                        <field name="is_hr_manager" invisible="1"/>
                        <field name="rank_id" style="width:50%%"/>
                        <field name="min_amount" style="width:50%%" attrs="{'invisible': [('is_hr_manager','=', True)]}"/>
                        <field name="max_amount" style="width:50%%" attrs="{'invisible': [('is_hr_manager','=', True)]}"/>
                    </group>
                </xpath>
            </field>
        </record>
        <!-- end 30-06-2022 -->

        <record id="view_users_form_inherit" model="ir.ui.view">
            <field name="name">res.users.inherit</field>
            <field name="model">res.users</field>
            <field name="inherit_id" ref="base.user_groups_view"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='login']" position="after">
                    <group><field name="is_hr_manager" /></group>
                </xpath>
            </field>
        </record> 

        <record id="hr_contract_view_form_inherit" model="ir.ui.view">
            <field name="name">hr.contract.inherit</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='wage']" position="after">
                    <field name="is_hr_manager" invisible="1"/>
                </xpath>
                <!-- <xpath expr="//group[@name='salary']" position="inside">
                    <label for="total_allowance"/>
                    <div class="o_row mw-50" name="total_allowance">
                        <field name="total_allowance" class="oe_inline o_hr_narrow_field" nolabel="1"/>
                        <div class="mb-3">/ month</div>
                    </div>
                    <label for="total_wage"/>
                    <div class="o_row mw-50" name="total_wage">
                        <field name="total_wage" class="oe_inline o_hr_narrow_field" nolabel="1"/>
                        <div class="mb-3">/ month</div>
                    </div>
                </xpath> -->
                <xpath expr="//page[@name='information']" position="attributes">
                        <attribute name="attrs" >{'invisible': [('is_hr_manager','=',True)]}</attribute>
                </xpath>
            </field>
        </record>

        <!-- <record id="hr_contract_history_view_form_inherit" model="ir.ui.view">
            <field name="name">hr.contract.history.inherit</field>
            <field name="model">hr.contract.history</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_history_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='contract_ids']/tree/field[@name='wage']" position="after">
                    <field name="total_allowance"/>
                    <field name="total_wage"/>
                </xpath>
            </field>
        </record> -->

        <menuitem
                id="menu_view_hr_job_hr"
                action="hr.action_hr_job"
                parent="hr.menu_hr_employee_payroll"
                sequence="4" groups="hr_contract.group_hr_contract_manager"/> 

        

        <!-- <record id="hr_employee_view_kanban_inherit" model="ir.ui.view">
            <field name="name">hr.employee.view.kanban</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.hr_kanban_view_employees"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='image_128']" position="after">
                    <field name="repair_status" />
                    <field name="job_order_id" />
                    <field name="fleet_id"/>
                    <field name="is_technician"/>
                    <field name="res_branch_id"/>
                </xpath>
                
                
                <xpath expr="//ul" position="replace">
                    <li id="last_login"/>
                    
                    <li t-if="record.is_technician.raw_value" class="o_text_overflow"><field name="res_branch_id" /></li>
                    <li t-if="record.work_phone.raw_value" class="o_text_overflow"><field name="work_phone" /></li>
                    <li t-if="record.job_order_id.raw_value" class="o_force_ltr"><field name="job_order_id" /></li>
                    <li t-if="record.fleet_id.raw_value" class="o_force_ltr"><field name="fleet_id" /></li>
                    <li><span t-attf-class="badge #{ ['free'].indexOf(record.repair_status.raw_value) &gt; -1 ? 'bg-success' : 'bg-danger'}"><t t-esc="record.repair_status.value"/></span></li>
                </xpath>
                
            </field>
        </record> -->

    <record id="ir_cron_scheduler_creat_users_from_employee" model="ir.cron">
        <field name="name">Create Users from Employee</field>
        <field name="model_id" ref="model_hr_employee"/>
        <field name="state">code</field>
        <field name="code">model._auto_create_user(100)</field>
        <field name="user_id" ref="base.user_root"/>
        <field name="interval_number">100</field>
        <field name="interval_type">days</field>
        <field name="numbercall">-1</field>
        <field name="active">False</field>
    </record>        

</odoo>
